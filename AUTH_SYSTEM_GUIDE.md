# ๐ ูุธุงู ุชุณุฌูู ุงูุฏุฎูู - Supabase Auth

## โ ุชู ุงูุชูููุฐ ุจุงููุงูู

ุชู ุชุทุจูู ูุธุงู ุชุณุฌูู ุฏุฎูู ูุงูู ุจุงุณุชุฎุฏุงู Supabase Auth ูุญูุงูุฉ ููุญุฉ ุงูุฅุฏุงุฑุฉ.

---

## ๐ ุงููููุงุช ุงูููุดุฃุฉ/ุงููุนุฏูุฉ

### โจ ูููุงุช ุฌุฏูุฏุฉ:

1. **`src/pages/Login.tsx`**
   - ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ุจุงูุนุฑุจูุฉ
   - ูููุฐุฌ ุจุณูุท ูุฌููู
   - ุฏุนู RTL ูุงูู
   - ุงูุชุญูู ูู ุงููุฏุฎูุงุช
   - ุฑุณุงุฆู ุฎุทุฃ ุจุงูุนุฑุจูุฉ

2. **`src/components/ProtectedRoute.tsx`**
   - ูููู ูุญูุงูุฉ ุงููุณุงุฑุงุช
   - ูุชุญูู ูู ุงูุฌูุณุฉ ุชููุงุฆููุง
   - ูุนูุฏ ุงูุชูุฌูู ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
   - ูุณุชูุน ููุชุบููุฑุงุช ูู ุญุงูุฉ ุงููุตุงุฏูุฉ

### ๐ง ูููุงุช ูุนุฏูุฉ:

3. **`src/App.tsx`**
   - ุฅุถุงูุฉ ูุณุงุฑ `/admin/login`
   - ุญูุงูุฉ ูุณุงุฑุงุช `/admin/*` ุจู ProtectedRoute
   - ุงุณุชูุฑุงุฏ ูููู Login

4. **`src/layout/Sidebar.tsx`**
   - ุฅุถุงูุฉ ูุธููุฉ ุชุณุฌูู ุฎุฑูุฌ ุญููููุฉ
   - ุงุณุชุฎุฏุงู `supabase.auth.signOut()`
   - ุฅุธูุงุฑ ุฑุณุงูุฉ ูุฌุงุญ ุนูุฏ ุชุณุฌูู ุงูุฎุฑูุฌ

5. **`src/layout/Header.tsx`**
   - ุฅุถุงูุฉ ูุธููุฉ ุชุณุฌูู ุฎุฑูุฌ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
   - ุงุณุชุฎุฏุงู `supabase.auth.signOut()`
   - ุงูุชูุฌูู ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1๏ธโฃ ุชุณุฌูู ุงูุฏุฎูู

ุงูุชูู ุฅูู:
```
http://localhost:5173/admin/login
```

ุฃุฏุฎู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุณุฌู ูู Supabase:
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ูููุฉ ุงููุฑูุฑ

### 2๏ธโฃ ุงููุตูู ูููุญุฉ ุงูุฅุฏุงุฑุฉ

ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ:
- ูุชู ุชูุฌููู ุชููุงุฆููุง ุฅูู `/admin`
- ููููู ุงููุตูู ูุฌููุน ุตูุญุงุช ุงูุฅุฏุงุฑุฉ
- ุงูุฌูุณุฉ ูุญููุธุฉ ุชููุงุฆููุง

### 3๏ธโฃ ุงููุณุงุฑุงุช ุงููุญููุฉ

ุงููุณุงุฑุงุช ุงูุชุงููุฉ ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู:
```
/admin              โ ููุญุฉ ุงูุชุญูู
/admin/requests     โ ุตูุญุฉ ุงูุทูุจุงุช
/admin/settings     โ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
```

ุฅุฐุง ุญุงููุช ุงููุตูู ุจุฏูู ุชุณุฌูู ุฏุฎูู โ ุณูุชู ุชูุฌููู ูู `/admin/login`

### 4๏ธโฃ ุชุณุฌูู ุงูุฎุฑูุฌ

ููููู ุชุณุฌูู ุงูุฎุฑูุฌ ูู:
- **ุฒุฑ ุชุณุฌูู ุงูุฎุฑูุฌ** ูู ุงูู Sidebar (ุงูุฃุณูู)
- **ูุงุฆูุฉ ุงููุณุชุฎุฏู** ูู ุงูู Header (ุฃุนูู ุงููููู)

ุนูุฏ ุชุณุฌูู ุงูุฎุฑูุฌ:
- ูุชู ูุณุญ ุงูุฌูุณุฉ ูู Supabase
- ูุชู ุชูุฌููู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- ุชุธูุฑ ุฑุณุงูุฉ "ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ"

---

## ๐ ุขููุฉ ุงูุญูุงูุฉ

### ููู ูุนูู ProtectedRoute:

```typescript
// ุงูุชุญูู ูู ุงูุฌูุณุฉ
const { data: { session } } = await supabase.auth.getSession();

// ุฅุฐุง ูู ุชูุฌุฏ ุฌูุณุฉ
if (!session) {
  return <Navigate to="/admin/login" />
}

// ุฅุฐุง ูุฌุฏุช ุฌูุณุฉ
return children; // ุนุฑุถ ุงููุญุชูู ุงููุญูู
```

### ุงูุงุณุชูุงุน ูุชุบููุฑุงุช ุงูุฌูุณุฉ:

```typescript
supabase.auth.onAuthStateChange((event, session) => {
  if (event === "SIGNED_IN") {
    // ุงููุณุชุฎุฏู ุณุฌู ุฏุฎูู
  }
  if (event === "SIGNED_OUT") {
    // ุงููุณุชุฎุฏู ุณุฌู ุฎุฑูุฌ
  }
});
```

---

## ๐ ุชูุงุตูู ุงูุชูููุฐ

### 1. ุตูุญุฉ Login (`src/pages/Login.tsx`)

**ุงููููุฒุงุช:**
- โ ูููุฐุฌ ุจุณูุท ูุฌููู ุจุงุณุชุฎุฏุงู Shadcn UI
- โ ุฏุนู RTL ูุงูู (`dir="rtl"`)
- โ ุฃููููุงุช ูุงุถุญุฉ (Mail & Lock)
- โ ุงูุชุญูู ูู ุงููุฏุฎูุงุช ูุจู ุงูุฅุฑุณุงู
- โ ุญุงูุฉ ุชุญููู ุฃุซูุงุก ุชุณุฌูู ุงูุฏุฎูู
- โ ุฑุณุงุฆู ุฎุทุฃ ุจุงูุนุฑุจูุฉ
- โ ุฑุณุงูุฉ ูุฌุงุญ ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู

**ุงููุธุงุฆู:**
```typescript
// ุชุณุฌูู ุงูุฏุฎูู
const { data, error } = await supabase.auth.signInWithPassword({
  email,
  password,
});

// ุฅุฐุง ูุฌุญ
if (data.session) {
  navigate("/admin");
}
```

### 2. ูููู ProtectedRoute (`src/components/ProtectedRoute.tsx`)

**ุงููููุฒุงุช:**
- โ ูุชุญูู ูู ุงูุฌูุณุฉ ุนูุฏ ุงูุชุญููู
- โ ูุณุชูุน ููุชุบููุฑุงุช ูู ุญุงูุฉ ุงููุตุงุฏูุฉ
- โ ุดุงุดุฉ ุชุญููู ุฌูููุฉ ุฃุซูุงุก ุงูุชุญูู
- โ ุฅุนุงุฏุฉ ุชูุฌูู ุชููุงุฆูุฉ ุฅุฐุง ูู ููู ูุณุฌู ุฏุฎูู

**ุงูุงุณุชุฎุฏุงู:**
```tsx
<Route path="/admin" element={
  <ProtectedRoute>
    <AdminLayout />
  </ProtectedRoute>
}>
  <Route index element={<Dashboard />} />
  <Route path="requests" element={<Requests />} />
</Route>
```

### 3. ุชุณุฌูู ุงูุฎุฑูุฌ

**ูู Sidebar & Header:**
```typescript
const handleLogout = async () => {
  const { error } = await supabase.auth.signOut();
  
  if (!error) {
    toast({ title: "ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ" });
    navigate("/admin/login");
  }
};
```

---

## ๐จ ุงูุชุตููู

### ุตูุญุฉ Login:
- ุฎูููุฉ ุจุชุฏุฑุฌ ูููู ุฌููู
- ุจุทุงูุฉ ูู ุงูููุชุตู ูุน ุธู
- ุฃููููุฉ ููู ูู ุงูุฃุนูู
- ุญููู ุฅุฏุฎุงู ุจุฃููููุงุช
- ุฒุฑ ูุจูุฑ ูุงุถุญ
- ุฑุณุงุฆู ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

### ุดุงุดุฉ ุงูุชุญููู:
- ุฃููููุฉ ุฏูุงุฑุฉ ูู ุงูููุชุตู
- ูุต "ุฌุงุฑู ุงูุชุญูู ูู ุงูุฌูุณุฉ..."
- ุชุตููู ุจุณูุท ููุธูู

---

## ๐ง ุฅุนุฏุงุฏุงุช Supabase

### ุชุฃูุฏ ูู:

1. **ุชูุนูู Email Auth ูู Supabase:**
   - Dashboard โ Authentication โ Providers
   - Enable "Email"

2. **ุฅูุดุงุก ูุณุชุฎุฏู Admin:**
   ```sql
   -- ูู Supabase SQL Editor
   -- ุฃู ุงุณุชุฎุฏู Dashboard โ Authentication โ Users โ Add User
   ```

3. **URL Redirect (ุงุฎุชูุงุฑู):**
   - ูู ุฅุนุฏุงุฏุงุช Supabase
   - ุฃุถู `http://localhost:5173/admin` ูู Redirect URLs

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [x] ุตูุญุฉ Login ุฌุงูุฒุฉ ูุชุนูู
- [x] ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู Supabase Auth
- [x] ุญูุงูุฉ ูุณุงุฑุงุช `/admin/*`
- [x] ูููู ProtectedRoute ุฌุงูุฒ
- [x] ุชุณุฌูู ุงูุฎุฑูุฌ ูุนูู ูู Sidebar
- [x] ุชุณุฌูู ุงูุฎุฑูุฌ ูุนูู ูู Header
- [x] ุฑุณุงุฆู Toast ุจุงูุนุฑุจูุฉ
- [x] ุฏุนู RTL ูู ุตูุญุฉ Login
- [x] ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
- [x] ุดุงุดุฉ ุชุญููู ุฃุซูุงุก ุงูุชุญูู
- [x] ุงูุงุณุชูุงุน ูุชุบููุฑุงุช ุญุงูุฉ ุงููุตุงุฏูุฉ

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู:
```
1. ุงูุชุญ http://localhost:5173/admin/login
2. ุฃุฏุฎู ุจุฑูุฏ ุฅููุชุฑููู ุฎุงุทุฆ
   โ ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ ุฎุทุฃ ุจุงูุนุฑุจูุฉ
3. ุฃุฏุฎู ุงูุจูุงูุงุช ุงูุตุญูุญุฉ
   โ ูุฌุจ ุฃู ูุชู ุชูุฌููู ูู /admin
   โ ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ "ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ"
```

### 2. ุงุฎุชุจุงุฑ ุงูุญูุงูุฉ:
```
1. ุณุฌู ุฎุฑูุฌ
2. ุญุงูู ุงููุตูู ูู http://localhost:5173/admin
   โ ูุฌุจ ุฃู ูุชู ุชูุฌููู ูู /admin/login
3. ุญุงูู ุงููุตูู ูู http://localhost:5173/admin/requests
   โ ูุฌุจ ุฃู ูุชู ุชูุฌููู ูู /admin/login
```

### 3. ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฎุฑูุฌ:
```
1. ุณุฌู ุฏุฎูู
2. ุงุถุบุท ุนูู ุฒุฑ "ุชุณุฌูู ุงูุฎุฑูุฌ" ูู Sidebar
   โ ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ "ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ"
   โ ูุฌุจ ุฃู ูุชู ุชูุฌููู ูู /admin/login
3. ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
4. ุงุถุบุท ุนูู ุฃููููุฉ ุงููุณุชุฎุฏู ูู Header โ ุชุณุฌูู ุงูุฎุฑูุฌ
   โ ููุณ ุงููุชูุฌุฉ
```

### 4. ุงุฎุชุจุงุฑ ุงูุฌูุณุฉ:
```
1. ุณุฌู ุฏุฎูู
2. ุฃุบูู ุงููุชุตูุญ
3. ุงูุชุญ ุงููุชุตูุญ ูุฑุฉ ุฃุฎุฑู
4. ุงุฐูุจ ุฅูู http://localhost:5173/admin
   โ ุฅุฐุง ูุงูุช ุงูุฌูุณุฉ ูุญููุธุฉ: ูุฌุจ ุฃู ุชุฏุฎู ูุจุงุดุฑุฉ
   โ ุฅุฐุง ุงูุชูุช ุงูุฌูุณุฉ: ูุฌุจ ุฃู ูุชู ุชูุฌููู ูู /admin/login
```

---

## ๐ ุงูุฃูุงู

### ููุงุท ุงูุฃูุงู ุงููุทุจูุฉ:

1. โ **ุญูุงูุฉ ุงููุณุงุฑุงุช:** ุฌููุน ูุณุงุฑุงุช `/admin/*` ูุญููุฉ
2. โ **ุงูุชุญูู ูู ุงูุฌูุณุฉ:** ูุชู ุงูุชุญูู ุนูุฏ ูู ุชุญููู
3. โ **Supabase Session:** ูุชู ุฅุฏุงุฑุฉ ุงูุฌูุณุฉ ุชููุงุฆููุง ูู Supabase
4. โ **Automatic Redirect:** ุชูุฌูู ุชููุงุฆู ูููุณุชุฎุฏููู ุบูุฑ ุงููุณุฌููู
5. โ **Auth State Listener:** ุงูุงุณุชูุงุน ูุชุบููุฑุงุช ุญุงูุฉ ุงููุตุงุฏูุฉ
6. โ **Secure Sign Out:** ุชุณุฌูู ุฎุฑูุฌ ุขูู ูุน ูุณุญ ุงูุฌูุณุฉ

### ููุงุญุธุงุช ุฃูุงู ุฅุถุงููุฉ:

โ๏ธ **ููุฅูุชุงุฌ:**
- ุงุณุชุฎุฏู HTTPS ููุท
- ูุนูู Rate Limiting ูู Supabase
- ูุนูู Email Confirmation ุฅุฐุง ูุฒู ุงูุฃูุฑ
- ุงุณุชุฎุฏู RLS (Row Level Security) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุง ุชุดุงุฑู ุงูู anon key ูู ุงูุฃูุงูู ุงูุนุงูุฉ

---

## ๐ ุงูููุงุฑุฏ

### Supabase Auth Docs:
- https://supabase.com/docs/guides/auth

### React Router Protected Routes:
- https://reactrouter.com/en/main/start/tutorial

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุชูููุฐ ูุธุงู ุชุณุฌูู ุฏุฎูู ูุงูู ูุขูู ุจุงุณุชุฎุฏุงู:
- โ Supabase Auth
- โ React Router Protected Routes
- โ Shadcn UI Components
- โ TailwindCSS Styling
- โ RTL Support
- โ Arabic Translations
- โ Toast Notifications
- โ Clean Code Structure

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐
